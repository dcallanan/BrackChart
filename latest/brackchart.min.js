var brackChart_flags=[];function BrackChart(a){this.c={paddingX:60,paddingY:30,lineWidth:1},this.lc={matchWidth:230,matchHeight:130,lowestMatchY:0},this.rounds=this.createRounds(a),this.roundNames=[]}BrackChart.prototype.config=function(a){this.c=a},BrackChart.prototype.createRounds=function(a){var b=null,c=[];for(let[e,f]of a.entries()){var d=new BrackChartRound;d.c=this.c,d.lc=this.lc,d.setParent(b),d.setIndex(e),d.createFromData(f),c.push(d),b=d}return c},BrackChart.prototype.setRoundNames=function(a){for(let[c,d]of a.entries()){var b=new BrackChartRoundName(d,c);b.c=this.c,b.lc=this.lc,this.roundNames.push(b)}},BrackChart.prototype.createChart=function(a){var b=document.querySelector(a),c=new BrackChartElementFactory(b);c.c=this.c,c.lc=this.lc,b.classList.add("brackChart_container"),b.style.width=2*this.c.paddingX+this.rounds.length*(this.lc.matchWidth+this.c.paddingX)+"px";for(let d of this.roundNames)b.appendChild(d.createElement());for(let d of this.rounds)for(let e of d.matches)c.createMatch(e),c.createLines(e.lines);b.style.height=this.lc.lowestMatchY+this.lc.matchHeight+this.c.paddingY+"px"};function BrackChartElementFactory(a){for(this.element=a,this.flagBuilder=new BrackChartFlagBuilder,a.innerHTML="";a.firstChild;)a.removeChild(a.firstChild)}BrackChartElementFactory.prototype.createMatch=function(a){var b=document.createElement("div");b.classList.add("brackChart_match"),b.style.width=a.width+"px",b.style.height=a.height+"px",b.style.top=a.y+"px",b.style.left=a.x+"px";var c=this.createMatchTeam(a.team1,a.score1,1==a.winner),d=this.createMatchTeam(a.team2,a.score2,2==a.winner),e=this.createMatchInfo(a.info),f=document.createElement("div");if(f.classList.add("brackChart_generalInfo"),f.appendChild(c),f.appendChild(e.element),f.appendChild(d),b.appendChild(f),a.info.moreInfo&&0<a.info.moreInfo.length){var g=document.createElement("div");g.classList.add("brackChart_backButton"),g.innerText="BACK",g.style.top=this.lc.matchHeight-35+"px",g.style.width=this.lc.matchWidth+"px",g.onmousedown=()=>g.classList.add("active"),g.addEventListener("transitionend",()=>g.classList.remove("active")),g.addEventListener("webkitTransitionEnd",()=>g.classList.remove("active"));var h=document.createElement("div");h.classList.add("brackChart_moreInfo");for(var j of a.info.moreInfo)h.appendChild(this.createMatchMoreInfoText(j));h.appendChild(g),b.appendChild(h),h.style.transform="translateX(100%) translateY(-"+a.height+"px)",e.button.onclick=function(){f.classList.add("hidden"),h.style.transform="translateX(0%) translateY(-"+a.height+"px)"},g.onclick=function(){f.classList.remove("hidden"),h.style.transform="translateX(100%) translateY(-"+a.height+"px)"}}if(a.winner){var k=document.createElement("div");k.classList.add("brackChart_winnerLine"),1==a.winner?(k.style.top="33px",k.style.left="173px"):(k.style.bottom="10px",k.style.left="173px"),f.appendChild(k)}if(a.info.prev){b.classList.add("prev");var l=document.createElement("div");l.classList.add("brackChart_prevBubble"),l.innerText=a.info.prev,l.style.top=a.y+this.lc.matchHeight+5+"px",l.style.left=a.x+"px",this.element.appendChild(l),b.onmouseenter=function(){l.classList.add("visible")},b.onmouseleave=function(){l.classList.remove("visible")}}this.element.appendChild(b)},BrackChartElementFactory.prototype.createMatchInfo=function(a){var b=null,c=document.createElement("div");c.classList.add("brackChart_info");var d=document.createElement("div");d.classList.add("brackChart_time"),d.innerHTML=a.time;var e=document.createElement("div");return e.classList.add("brackChart_date"),e.innerHTML=a.date,c.appendChild(d),c.appendChild(e),void 0!==a.moreInfo&&0<a.moreInfo.length&&(b=document.createElement("div"),b.classList.add("brackChart_moreInfoButton"),b.innerHTML="MORE INFO",b.addEventListener("webkitTransitionEnd",()=>b.classList.remove("active")),b.addEventListener("transitionend",()=>b.classList.remove("active")),c.appendChild(b),b.onmousedown=()=>b.classList.add("active")),{element:c,button:b}},BrackChartElementFactory.prototype.createMatchMoreInfoText=function(a){var b=document.createElement("div");return b.classList.add("brackChart_moreInfoText"),b.innerText=a,b},BrackChartElementFactory.prototype.createMatchTeam=function(a,b){var d=document.createElement("div");var e=brackChart_flags[a],f=this.flagBuilder.build(e);d.appendChild(f);var g=document.createElement("div");g.classList.add("brackChart_teamName"),g.innerHTML=a;var h=document.createElement("div");return h.classList.add("brackChart_teamScore"),h.innerHTML=b,d.appendChild(g),d.appendChild(h),d},BrackChartElementFactory.prototype.createLines=function(a){for(var b of a)this.createLine(b)},BrackChartElementFactory.prototype.createLine=function(a){var b=document.createElement("div");if(b.classList.add("brackChart_line"),a.x1){var c=a.x2-a.x1;b.style.width=c+"px",b.style.height=this.c.lineWidth+"px",b.style.left=a.x1+"px",b.style.top=a.y-this.c.lineWidth/2+"px"}else{var d=a.y2-a.y1;b.style.width=this.c.lineWidth+"px",b.style.height=d+"px",b.style.left=a.x-this.c.lineWidth/2+"px",b.style.top=a.y1+"px"}this.element.appendChild(b)};function BrackChartFlagBuilder(){}BrackChartFlagBuilder.prototype.build=function(a){var b=document.createElement("div");if(!a)this.buildPiece(b,50,"444");else if(Array.isArray(a)){for(var c of a)this.buildPiece(b,48/a.length,c);var d=a[a.length-1];"ffffff"==d?(this.buildPiece(b,1,d),this.buildPiece(b,1,"ccc")):this.buildPiece(b,2,d)}else this.buildImage(b,a);return b},BrackChartFlagBuilder.prototype.buildPiece=function(a,b,c){var d=document.createElement("div");d.classList.add("brackChart_flagPiece"),d.style.backgroundColor="#"+c,d.style.width=b+"px",a.appendChild(d)},BrackChartFlagBuilder.prototype.buildImage=function(a,b){var c=new Image;c.classList.add("brackChart_flagPiece"),c.style.width="50px",c.src=b,a.appendChild(c)};function BrackChartMatch(a){this.parent1=null,this.parent2=null,this.round=a,this.info={},this.lines=[]}BrackChartMatch.prototype.initParents=function(a,b,c){b&&(this.parent1=a.getMatch(2*c),this.parent2=a.getMatch(2*c+1))},BrackChartMatch.prototype.updateDimensions=function(){var a=2*this.c.paddingY+32;this.x=this.c.paddingX+this.xIndex*(this.lc.matchWidth+this.c.paddingX),this.y=this.hasParents()?(this.parent1.y+this.parent2.y)/2:0==this.yIndex?a:this.round.getMatch(this.yIndex-1).y+this.lc.matchHeight+this.c.paddingY,this.width=this.lc.matchWidth,this.height=this.lc.matchHeight,this.y>this.lc.lowestMatchY&&(this.lc.lowestMatchY=this.y)},BrackChartMatch.prototype.createLines=function(){if(this.hasParents()){var a=this.parent1.winner,b=this.parent2.winner,c=this.lc.matchHeight/4,d=c;this.parent1.info.loserWins&&(c*=-1),this.parent2.info.loserWins&&(d*=-1);var e=this.parent1.y+this.lc.matchHeight/2+(1==a?-c/4:2==a?c:0),f=this.parent2.y+this.lc.matchHeight/2+(1==b?-d/4:2==b?d:0);this.lines.push({x:this.x-this.c.paddingX/2,y1:e,y2:f}),this.lines.push({x1:this.x-this.c.paddingX,x2:this.x-this.c.paddingX/2,y:e}),this.lines.push({x1:this.x-this.c.paddingX,x2:this.x-this.c.paddingX/2,y:f}),this.lines.push({x1:this.x-this.c.paddingX/2,x2:this.x,y:this.y+this.c.paddingY})}},BrackChartMatch.prototype.setIndex=function(a,b){this.xIndex=a,this.yIndex=b},BrackChartMatch.prototype.setTeams=function(a,b){this.team1=a,this.team2=b},BrackChartMatch.prototype.setScores=function(a,b){this.score1=a,this.score2=b},BrackChartMatch.prototype.setWinner=function(a){this.winner=a,this.winnerName=null==a?null:this["team"+a]},BrackChartMatch.prototype.setInfo=function(a){this.info=a},BrackChartMatch.prototype.hasParents=function(){return this.parent1||this.parent2};function BrackChartRound(){this.parent=null,this.index=null,this.matches=[]}BrackChartRound.prototype.setParent=function(a){this.parent=a},BrackChartRound.prototype.setIndex=function(a){this.index=a},BrackChartRound.prototype.createFromData=function(a){var b=0;for(let[d,e]of a.entries()){var c=new BrackChartMatch(this);c.c=this.c,c.lc=this.lc,c.setTeams(e.team1,e.team2),c.setScores(e.score1,e.score2),c.setWinner(e.winner),c.setInfo(e.info),c.setIndex(this.index,d),c.initParents(this.parent,e.connectsFrom,b),c.updateDimensions(),c.createLines(),this.matches.push(c),e.info.prev||b++}},BrackChartRound.prototype.getMatch=function(a){return this.matches[a]};function BrackChartRoundName(a,b){this.text=a,this.index=b}BrackChartRoundName.prototype.createElement=function(){var a=document.createElement("div");return a.classList.add("brackChart_roundName"),a.style.top=this.c.paddingY+"px",a.style.left=this.c.paddingX+(this.lc.matchWidth+this.c.paddingX)*this.index+"px",a.innerText=this.text,a};